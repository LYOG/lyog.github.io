<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Cookie与Session的区别 · 盒子笔迹</title><meta name="description" content="Cookie与Session的区别 - 盒子"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="lyog.github.io/atom.xml" title="盒子笔迹"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="盒子笔迹" type="application/atom+xml">
</head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">盒子笔迹</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>现在</p></a><a href="/archives/" target="_self" class="li component-nav-item"><p>过去</p></a></ul></nav><!--        ul.shortcut-icons--><!--            each nav_item in theme.nav_icons--><!--                a(href=nav_item[1] target="_blank")--><!--                    img.icon(src=nav_item[0])--></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">Cookie与Session的区别</h1><div class="post-info">Jun 3, 2018</div><div class="post-content"><h4 id="Cookie机制"><a href="#Cookie机制" class="headerlink" title="Cookie机制"></a>Cookie机制</h4><p>Cookies是服务器在本地机器上存储的小段文字并随每一个请求发送至同一个服务器。网络服务器用HTTP头向客户端发送Cookies，在客户端，浏览器解析这些Cookies并将它们保存为一个本地文件，它会自动将同一服务器的任何请求缚上这些Cookies。</p>
<p>具体来说Cookie机制采取的是<strong>在客户端保持状态</strong>的方案。它需要用户打开客户端的Cookie支持，它的作用就是为了<strong>解决HTTP协议无状态</strong>的缺陷。</p>
<p><strong>Cookie的内容主要包括：名字、值、过期时间、路径和域。</strong></p>
<p>路径和域一起构成Cookie的作用范围。</p>
<p>若不设置范围，则Cookie的生命周期为浏览器会话状态期间，关闭浏览器，Cookie就消失。这种Cookie称为会话Cookie，通常保存在内存中。而设置了过期时间的Cookie会被保存至硬盘。</p>
<h4 id="Session机制"><a href="#Session机制" class="headerlink" title="Session机制"></a>Session机制</h4><p>Session机制是一种服务器端的机制，服务器使用一种类似于散列表的结构来保存信息。</p>
<p>当程序需要为某个客户端的请求创建一个Session时，服务器首先检查这个客户端里知否已经包含一个Session标识，如果包含则按照Session ID来把这个Session检索出来，检索不到的话会新建一个。</p>
<p>如果客户端请求不包含Session ID，则为此客户端创建一个Session并生成一个与此Session相关联的Session ID，这个Session ID将在本次响应中返回给客户端。</p>
<p>保存这个Session ID的方式可以采用Cookie，但如果Cookie被人禁止的话，就必须使用其它机制来传递Session ID。通常使用的一种技术叫做URL重写，就是把Session ID直接附加在URL路径后面；还有一种技术叫做表单隐藏字段，就是服务器会自动修改表单，添加一个隐藏字段，以便表单提交时能欧巴Session ID传回给服务器。</p>
<a id="more"></a> 

<h4 id="Cookie与Session的区别"><a href="#Cookie与Session的区别" class="headerlink" title="Cookie与Session的区别"></a>Cookie与Session的区别</h4><h5 id="存取方式不同"><a href="#存取方式不同" class="headerlink" title="存取方式不同"></a>存取方式不同</h5><p>Cookie只能保存ASCII字符串，如果需要存取Unicode字符或者二进制数据，需要先进行编码。</p>
<p>Cookie中也不能存取Java对象。</p>
<p>Session可以存取任意类型的数据，包括但不限于String、Integer、List、Map等。</p>
<p>Session中能够直接报关Java Bean甚至Java类、对象等，可以把Session看作一个Java容器。</p>
<h5 id="隐私策略不同"><a href="#隐私策略不同" class="headerlink" title="隐私策略不同"></a>隐私策略不同</h5><p>Cookie存储在客户端，对客户端是可见的，客户端可以窥探、复制和修改Cookie中的内容</p>
<p>Session存储在服务器中，对客户端是透明的，不存在敏感信息泄露的风险。</p>
<p>Cookie保护隐私的办法：敏感信息不要写进Cookie中，同时将Cookie信息加密，提交至服务器后再进行解密。</p>
<h5 id="有效期不同"><a href="#有效期不同" class="headerlink" title="有效期不同"></a>有效期不同</h5><p>使用Cookie，然后过期时间设置一个很大的数字，这样能实现登陆信息长期有效。比如Google，登陆一次后Google会持久的记载该用户的登陆信息，不用每次都重新登陆。</p>
<p>Session依赖于名为JSESSIONID的Cookie，而此Cookie的过期时间默认为-1，当浏览器关闭时该Session就会失效。而如果过期时间设置一个很大的值的时候，服务器的Session就会越堆越多，容易导致内存溢出。</p>
<h5 id="服务器压力不同"><a href="#服务器压力不同" class="headerlink" title="服务器压力不同"></a>服务器压力不同</h5><p>Session是保管在服务器上的，每个用户都产生一个Session，如果并发访问用户过多，则会产生很多的session消耗大量的内存。</p>
<p>而反观Cookie，它是保存在客户端的，不会占用服务器资源，所有并发量过大的时候，Cookie会是一个很好的选择。</p>
<h5 id="浏览器支持不同"><a href="#浏览器支持不同" class="headerlink" title="浏览器支持不同"></a>浏览器支持不同</h5><p>Cookie是需要客户端浏览器支持的，如果被禁用，则会话跟踪就会失效。</p>
<p>如果不支持Cookie，就需要使用Session，并且要保证所有用到Session的程序都有进行URL地址重写。</p>
<p>如果浏览器支持Cookie，则Cookie既能设置为本窗口和子窗口有效，也能设置为所有窗口有效。</p>
<p>但是Session只能在本窗口及子窗口下有效，如果两个浏览器窗口互不相干，则它们将运用两个不同的Session。</p>
<h5 id="跨域支持上的不同"><a href="#跨域支持上的不同" class="headerlink" title="跨域支持上的不同"></a>跨域支持上的不同</h5><p>Cookie支持跨域名访问，例如把domain属性设置为“.lyog.cn”，则以“.lyog.cn”为后缀的域名都能够访问该Cookie。</p>
<p>Session仅在它所在的域名内有效。</p>
<p>实际的生产过程中，不会仅仅使用一种的，而是Cookie和Session搭配使用，这样效果才会更好。</p>
</div></article></div></div></main><footer class="footer-container"><div class="paginator"><a href="/post/92da4c91.html" class="prev">PREV</a><a href="/post/b0ac8d7a.html" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2020 <a href="lyog.github.io">盒子</a> , Powered By <a href="https://hexo.io/" target="_blank">Hexo</a>.</p></div></footer></body></html>